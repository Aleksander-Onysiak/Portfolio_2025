<?php
$is_background = get_sub_field('is_background');
$dates = get_sub_field('dates');
if ($is_background): ?>
  <section class="container spiral">
    <h2 class="spiral-parcours-title">Mon parcours scolaire</h2>
    <svg class="spiral-parcours-svg" xmlns="http://www.w3.org/2000/svg" id="Calque_2" data-name="Calque 2"
         viewBox="0 0 788.9 545.36">
      <defs>
        <style>
          .cls-1 {
            fill: #FFF;
          }

          .cls-2 {
            fill: #56F4FF;
            stroke-miterlimit: 10;
          }

          /* Ajout CSS pour l’effet hover via nth-child */
          .container.spiral > * {
            transition: color 0.3s ease;
          }

          /* Couleur au hover, sera ajoutée via JS */
          .container.spiral > .highlight {
            color: red; /* couleur au hover, tu peux changer */
          }
        </style>
      </defs>

      <!-- Exemple des groupes avec class item_id + numéro -->
      <g class="item">
        <rect x="182.5" y="109.9" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-18.41 38.12) rotate(-10.35)"/>
        <rect x="230.02" y="102.87" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-5.87 13.83) rotate(-3.15)"/>
        <rect x="277.99" y="101.39" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(6.21 -15.22) rotate(2.97)"/>
        <rect x="325.68" y="106.31" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(28.35 -63) rotate(10.9)"/>
        <rect x="371.9" y="118.72" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(66.85 -124.52) rotate(19.77)"/>
        <rect x="415.48" y="138.93" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(147.09 -208.77) rotate(32.28)"/>
        <rect x="453.44" y="167.95" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(264.7 -281.53) rotate(45)"/>
        <rect x="481.29" y="206.58" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(478.82 -327.45) rotate(64.27)"/>
        <rect x="136.32" y="123" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-37.14 63.05) rotate(-20.58)"/>
        <rect x="92.33" y="142.65" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-59.07 70.16) rotate(-28.02)"/>
        <rect x="52.34" y="168.93" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-98.25 86.55) rotate(-39.6)"/>
        <rect x="18.44" y="202.86" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-154.67 112.54) rotate(-52.33)"/>
        <rect x="-4.75" y="244.94" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-230.6 179.77) rotate(-69.61)"/>
      </g>
      <g id="id0" class="item_id0">
        <rect class="cls-2" x="96.75" y="228.03" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-132.94 145.78) rotate(-43.66)"/>
        <g class="item  spiral">
          <rect class="cls-2" x="133.56" y="198.43" width="37.5" height="21.62" rx="9.31" ry="9.31"
                transform="translate(-89.47 116.93) rotate(-33.05)"/>
          <rect class="cls-2" x="176.13" y="176.64" width="37.5" height="21.62" rx="9.31" ry="9.31"
                transform="translate(-56.65 88.22) rotate(-22.36)"/>
          <rect class="cls-2" x="220.8" y="162.89" width="37.5" height="21.62" rx="9.31" ry="9.31"
                transform="translate(-31.24 54.41) rotate(-12.17)"/>
          <rect class="cls-2" x="267.62" y="156.38" width="37.5" height="21.62" rx="9.31" ry="9.31"
                transform="translate(-6.22 11.14) rotate(-2.21)"/>
          <rect class="cls-2" x="314.56" y="156.53" width="37.5" height="21.62" rx="9.31" ry="9.31"
                transform="translate(13.13 -23.92) rotate(4.19)"/>
          <rect class="cls-2" x="361.98" y="163.61" width="37.5" height="21.62" rx="9.31" ry="9.31"
                transform="translate(61.59 -96.74) rotate(15.74)"/>
          <rect class="cls-2" x="407.44" y="177.85" width="37.5" height="21.62" rx="9.31" ry="9.31"
                transform="translate(98.69 -142.96) rotate(21.48)"/>
        </g>
        <rect class="cls-2" x="67.83" y="265.48" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-195.98 213.12) rotate(-60)"/>
        <rect class="cls-2" x="51.16" y="309.58" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-257.89 329.3) rotate(-79.25)"/>
        <rect class="cls-2" x="50.5" y="356.42" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-282.38 493.77) rotate(-99.11)"/>
        <rect class="cls-2" x="65.93" y="400.56" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-239.5 678.38) rotate(-117.85)"/>
        <rect class="cls-2" x="94.48" y="438.73" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-124.57 847.47) rotate(-135)"/>
      </g>
      <g id="id1" class="item_id1">
        <rect class="cls-2" x="442.18" y="81.68" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(97.68 -205.94) rotate(28.06)"/>
        <rect class="cls-2" x="482.75" y="108.06" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(185.05 -287.94) rotate(38.79)"/>
        <rect class="cls-2" x="514.91" y="144.05" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(382.64 -379.9) rotate(58.05)"/>
        <rect class="cls-2" x="531.87" y="189.39" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(675.21 -372.28) rotate(82.3)"/>
        <rect class="cls-2" x="527.56" y="237.41" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(964.71 -181.91) rotate(109.77)"/>
        <rect class="cls-2" x="503.57" y="279.46" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1086.77 94.12) rotate(131.78)"/>
        <rect class="cls-2" x="350.55" y="49.04" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(17.97 -68.73) rotate(10.9)"/>
        <rect class="cls-2" x="397.37" y="61.9" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(53.52 -144) rotate(20.95)"/>
        <rect class="cls-2" x="302.34" y="42.17" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(3.86 -19.61) rotate(3.52)"/>
        <rect class="cls-2" x="253.73" y="41.04" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-2.91 18.73) rotate(-3.92)"/>
        <rect class="cls-2" x="205.42" y="45.69" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-6.07 35.68) rotate(-8.98)"/>
        <rect class="cls-2" x="157.73" y="56.16" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-11.92 55.37) rotate(-17.26)"/>
        <rect class="cls-2" x="112.11" y="72.9" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-23.55 66.71) rotate(-26.32)"/>
      </g>
      <g class="item">
        <rect x="569.45" y="414.4" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1244.4 735.33) rotate(169.43)"/>
        <rect x="521.95" y="421.6" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1105.86 832.34) rotate(176.63)"/>
        <rect x="473.99" y="423.27" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(964.07 891.31) rotate(-177.25)"/>
        <rect x="426.28" y="418.54" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(802.79 933.72) rotate(-169.32)"/>
        <rect x="380.02" y="406.29" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(634.91 943.62) rotate(-160.44)"/>
        <rect x="336.36" y="386.25" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(445.25 922.07) rotate(-147.94)"/>
        <rect x="298.29" y="357.37" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(282.72 852.84) rotate(-135.22)"/>
        <rect x="270.29" y="318.85" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(119.06 733.79) rotate(-115.94)"/>
        <rect x="615.58" y="401.12" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1373.58 571.79) rotate(159.2)"/>
        <rect x="659.49" y="381.31" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1461.28 416.71) rotate(151.77)"/>
        <rect x="699.38" y="354.87" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1503.89 186.74) rotate(140.19)"/>
        <rect x="733.15" y="320.82" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1472.38 -63.66) rotate(127.45)"/>
        <rect x="756.18" y="278.65" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1313.85 -338.14) rotate(110.17)"/>
      </g>
      <g id="id2" class="item_id2">
        <rect class="cls-2" x="654.74" y="295.94" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1371.59 61.08) rotate(136.12)"/>
        <rect class="cls-2" x="683.53" y="258.38" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1284.73 -206.62) rotate(119.78)"/>
        <rect class="cls-2" x="700.03" y="214.22" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1071.41 -440.5) rotate(100.53)"/>
        <rect class="cls-2" x="700.51" y="167.37" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(778.46 -560.45) rotate(80.67)"/>
        <rect class="cls-2" x="684.92" y="123.3" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(490.96 -549.91) rotate(61.94)"/>
        <rect class="cls-2" x="656.22" y="85.24" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(263.54 -447.58) rotate(44.78)"/>
      </g>
      <g class="item">
        <rect class="cls-2" x="618.05" y="325.68" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1353.82 268.49) rotate(146.73)"/>
        <rect class="cls-2" x="575.57" y="347.64" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1280.69 461.26) rotate(157.42)"/>
        <rect class="cls-2" x="530.95" y="361.55" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1166.49 618.1) rotate(167.61)"/>
        <rect class="cls-2" x="484.15" y="368.24" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1021.37 736.5) rotate(177.58)"/>
        <rect class="cls-2" x="437.21" y="368.27" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(884.55 788.85) rotate(-176.03)"/>
        <rect class="cls-2" x="389.77" y="361.37" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(702.53 840.1) rotate(-164.48)"/>
        <rect class="cls-2" x="344.26" y="347.3" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(571.43 823.47) rotate(-158.74)"/>
      </g>
      <g id="id3" class="item_id3">
        <rect class="cls-2" x="309.88" y="443.6" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(406.99 1009.7) rotate(-152.16)"/>
        <rect class="cls-2" x="269.21" y="417.38" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(246.14 942.49) rotate(-141.43)"/>
        <rect class="cls-2" x="236.91" y="381.51" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(59.69 817.6) rotate(-122.17)"/>
        <rect class="cls-2" x="219.78" y="336.23" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-72.34 631.11) rotate(-97.92)"/>
        <rect class="cls-2" x="223.91" y="288.2" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-120.33 427.58) rotate(-70.44)"/>
        <rect class="cls-2" x="247.73" y="246.06" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-102.5 285.87) rotate(-48.44)"/>
        <rect class="cls-2" x="401.63" y="475.89" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(743.28 1042.87) rotate(-169.32)"/>
        <rect class="cls-2" x="354.76" y="463.21" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(554.99 1049.57) rotate(-159.26)"/>
        <rect class="cls-2" x="449.86" y="482.58" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(908.02 1012.95) rotate(-176.7)"/>
        <rect class="cls-2" x="498.48" y="483.53" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1068.75 950.1) rotate(175.87)"/>
        <rect class="cls-2" x="546.77" y="478.7" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1202 882.34) rotate(170.8)"/>
        <rect class="cls-2" x="594.42" y="468.05" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1341.82 751.5) rotate(162.53)"/>
        <rect class="cls-2" x="639.98" y="451.13" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(1454.45 580.84) rotate(153.46)"/>
      </g>
      <g class="item">
        <rect x="138.49" y="324.82" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(509.19 219.41) rotate(96.83)"/>
        <rect x="143.21" y="372.18" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(487.55 124.33) rotate(74.46)"/>
        <rect x="163.92" y="415.34" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(430.99 34.61) rotate(55.59)"/>
        <rect x="195.83" y="450.98" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(356.18 -27.33) rotate(41.07)"/>
        <rect x="235.11" y="478.9" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(271.79 -61.6) rotate(29.26)"/>
        <rect x="277.99" y="499.95" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(207.77 -73.21) rotate(21.49)"/>
        <rect x="323.69" y="514.26" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(131.49 -65.24) rotate(13.45)"/>
        <rect x="370.98" y="522.7" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(62.15 -40.26) rotate(6.43)"/>
        <rect x="153.45" y="279.64" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(509.83 286.55) rotate(120)"/>
        <rect x="184.06" y="243.03" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(525.71 289.91) rotate(135)"/>
        <rect x="223.5" y="215.83" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(562.93 311.56) rotate(151.74)"/>
        <rect x="267.82" y="197.46" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(623.28 318.41) rotate(162.11)"/>
        <rect x="314.56" y="186.65" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(691.42 345.23) rotate(171.78)"/>
      </g>
      <g class="item">
        <rect x="613.26" y="199.94" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(345.07 812.02) rotate(-82.93)"/>
        <rect x="608.74" y="152.57" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(635.48 811.74) rotate(-105.3)"/>
        <rect x="588.22" y="109.32" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(848.5 689.78) rotate(-124.17)"/>
        <rect x="556.46" y="73.55" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(951.58 527.45) rotate(-138.69)"/>
        <rect x="517.3" y="45.46" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(974.85 369.27) rotate(-150.49)"/>
        <rect x="474.5" y="24.23" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(938.46 250.25) rotate(-158.26)"/>
        <rect x="428.87" y="9.72" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(877.66 146.41) rotate(-166.31)"/>
        <rect x="381.62" y="1.09" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(796.65 70.19) rotate(-173.33)"/>
        <rect x="598.12" y="245.06" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(85.13 659.91) rotate(-59.76)"/>
        <rect x="567.35" y="281.55" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-35.94 497.43) rotate(-44.76)"/>
        <rect x="527.79" y="308.58" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-85.98 294.16) rotate(-28.02)"/>
        <rect x="483.39" y="326.75" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-78.72 168.16) rotate(-17.65)"/>
        <rect x="436.61" y="337.37" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(-43.91 66.56) rotate(-7.98)"/>
      </g>
      <g data-name="&amp;lt;Groupe class=&amp;quot;id1&amp;quot;&amp;gt;" class="item_id_0">
        <rect class="cls-1" x="337.09" y="212.71" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(768.35 303.68) rotate(158.86)"/>
        <rect class="cls-1" x="384.12" y="206.62" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(788.76 463.73) rotate(-175.81)"/>
        <rect class="cls-1" x="433.17" y="222.43" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(698.47 678.03) rotate(-146.3)"/>
        <rect class="cls-1" x="431.24" y="303" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(997.79 343.34) rotate(148.2)"/>
        <rect class="cls-1" x="457.65" y="265.58" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(786.88 -178.53) rotate(94.19)"/>
        <rect class="cls-1" x="300.98" y="285.27" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(260.43 727.78) rotate(-124.98)"/>
        <rect class="cls-1" x="299.74" y="239.89" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(694.84 100.24) rotate(120)"/>
        <rect class="cls-1" x="339.32" y="312.07" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(589.02 746.12) rotate(-160.66)"/>
        <rect class="cls-1" x="386.28" y="317.29" width="37.5" height="21.62" rx="9.31" ry="9.31"
              transform="translate(835.74 621.66) rotate(175.27)"/>
      </g>
    </svg>
    <?php
    $dates = get_sub_field('dates'); // Récupère ton tableau
    if ($dates && is_array($dates)):  // Vérifie que c'est bien un tableau
      foreach ($dates as $date): ?>
        <article class="spiral__quote_container">
          <div class="spiral__quote-text">
            <h3 class="spiral__quote_title"><?= htmlspecialchars($date['title']) ?></h3>
            <p class="spiral__quote_orientation"><?= htmlspecialchars($date['orientation']) ?></p>
            <p class="spiral__quote_years"><?= htmlspecialchars($date['years']) ?></p>
          </div>
          <div class="spiral__quote-img">
            <?php if (!empty($date['img']) && is_array($date['img'])): ?>
              <?= responsive_image($date['img'], ['classes' => 'spiral__quote_img-img']) ?>
            <?php endif; ?>
          </div>
        </article>
      <?php endforeach;
    endif;
    ?>
  </section>
<?php endif; ?>







